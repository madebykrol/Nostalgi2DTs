{
  "title": "Documentation",
  "sections": [
    {
      "id": "intro",
      "title": "Introduction",
      "summary": "Overview, concepts, and mental model.",
      "content": [
        {
          "type": "paragraph",
          "text": "Nostalgi2D is a TypeScript-first 2D game engine designed for building multiplayer games with an authoritative server architecture. It combines a visual editor with powerful coding APIs to make game development accessible and productive."
        },
        {
          "type": "paragraph",
          "text": "The engine provides both a graphical editor for visual tasks and clean TypeScript APIs for game logic. You can choose the approach that fits your workflow â€” use the editor for asset creation and scene setup, then write code for gameplay mechanics."
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Core Concepts"
        },
        {
          "type": "list",
          "items": [
            "Visual Editor with mesh designer and plugin system",
            "Entity Component System (ECS) architecture",
            "Deterministic game loop for consistent simulation",
            "Authoritative server model with input-based replication",
            "Client prediction and state reconciliation"
          ]
        }
      ]
    },
    {
      "id": "install",
      "title": "Installation",
      "summary": "Set up CLI, templates, and your first project.",
      "content": [
        {
          "type": "paragraph",
          "text": "Getting started with Nostalgi2D is straightforward. The repository includes multiple applications: a visual editor, client runtime, server, and project website."
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Prerequisites"
        },
        {
          "type": "list",
          "items": [
            "Node.js 18.x or higher",
            "npm 11.x package manager",
            "TypeScript 5.x"
          ]
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Quick Start"
        },
        {
          "type": "code",
          "language": "bash",
          "code": "# Clone the repository\ngit clone https://github.com/madebykrol/Nostalgi2DTs\n\n# Navigate to source directory\ncd Nostalgi2DTs/src\n\n# Install dependencies\nnpm install\n\n# Start the editor\nnpm run dev\n\n# Or start a specific app\nnpm run dev --filter=editor\nnpm run dev --filter=client\nnpm run dev --filter=server"
        },
        {
          "type": "heading",
          "level": 3,
          "text": "What's Included"
        },
        {
          "type": "list",
          "items": [
            "Visual Editor at http://localhost:5173 (editor app)",
            "Game Client runtime for testing",
            "Authoritative Server with networking",
            "Engine packages and core systems"
          ]
        }
      ]
    },
    {
      "id": "editor",
      "title": "Visual Editor",
      "summary": "Mesh designer, component editor, and plugin system.",
      "content": [
        {
          "type": "paragraph",
          "text": "The Nostalgi2D editor provides a graphical interface for creating game assets and managing your project. It's built as a web application with extensible plugin architecture."
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Mesh Component Designer"
        },
        {
          "type": "paragraph",
          "text": "Create custom 2D mesh shapes visually without writing code. The mesh designer lets you add, drag, and remove vertices on a canvas. Meshes are serialized to JSON and can be attached to actors in your game."
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Editor Plugin System"
        },
        {
          "type": "paragraph",
          "text": "Extend the editor with custom panels, context menus, and modals. Plugins use React components and have access to the editor's IoC container for dependency injection."
        },
        {
          "type": "code",
          "language": "typescript",
          "code": "// Example plugin registration\nconst myPlugin: EditorUIPlugin = {\n  id: 'my-plugin',\n  activate: ({ panels, editor }) => {\n    return panels.register({\n      id: 'my-panel',\n      title: 'My Tool',\n      location: 'left',\n      render: () => <MyComponent />\n    });\n  }\n};"
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Component Asset Storage"
        },
        {
          "type": "paragraph",
          "text": "The editor manages component assets through a storage system. Assets can be saved, loaded, and exported as JSON for use in your game runtime."
        }
      ]
    },
    {
      "id": "engine",
      "title": "Engine Core",
      "summary": "Game loop, timing, ECS, scenes, and input.",
      "content": [
        {
          "type": "paragraph",
          "text": "The engine core provides the fundamental building blocks for your game."
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Game Loop"
        },
        {
          "type": "paragraph",
          "text": "Nostalgi2D uses a fixed timestep game loop for deterministic simulation. This ensures consistent behavior across different machines and frame rates."
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Entity Component System"
        },
        {
          "type": "paragraph",
          "text": "The ECS architecture separates data (components) from behavior (systems), making your game logic modular and maintainable."
        }
      ]
    },
    {
      "id": "netcode",
      "title": "Networking",
      "summary": "Authoritative server, input replication, and prediction.",
      "content": [
        {
          "type": "paragraph",
          "text": "Nostalgi2D uses an input-based replication protocol for multiplayer games. The server is authoritative and clients send inputs rather than position updates."
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Input-Based Replication"
        },
        {
          "type": "paragraph",
          "text": "Clients send their input commands (keyboard, mouse) to the server. The server validates and replays these inputs deterministically to compute the authoritative game state."
        },
        {
          "type": "code",
          "language": "typescript",
          "code": "// Client sends input\ninterface ClientInputMessage {\n  type: 'client:input',\n  actorId: string,\n  sequence: number,\n  inputs: InputState[]\n}\n\n// Server broadcasts state\ninterface ActorUpdateMessage {\n  type: 'actor:update',\n  updates: ActorState[]\n}"
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Client Prediction & Reconciliation"
        },
        {
          "type": "paragraph",
          "text": "Clients predict their own actor's movement immediately for responsive controls. When receiving authoritative state from the server, clients reconcile by replaying inputs from their history if the state diverged."
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Actor Synchronization Protocol"
        },
        {
          "type": "paragraph",
          "text": "The protocol defines message types for actor spawn, despawn, ownership, and state updates. It includes visual diagrams and implementation examples in the documentation."
        }
      ]
    },
    {
      "id": "rendering",
      "title": "Rendering",
      "summary": "Adapters for Pixi, Canvas2D, and Three.js.",
      "content": [
        {
          "type": "paragraph",
          "text": "Nostalgi2D supports multiple rendering backends, allowing you to choose the best fit for your game."
        },
        {
          "type": "heading",
          "level": 3,
          "text": "Available Renderers"
        },
        {
          "type": "list",
          "items": [
            "PixiJS - High-performance 2D WebGL renderer",
            "Canvas2D - Simple and lightweight canvas API",
            "Three.js - For 2.5D or 3D effects"
          ]
        },
        {
          "type": "paragraph",
          "text": "All renderers share a common interface, making it easy to switch between them."
        }
      ]
    }
  ]
}
